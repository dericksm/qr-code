<!DOCTYPE html>
<html lang="en">

<head>
    <title>QrCode Scanner</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script type="text/javascript" src="js/instascan.min.js"></script>
</head>

<body>
    <div class="container">
        <div class="row align-items-center justify-content-center">
            <div class="col-sm-6 login-box">
                <div class="login-box-body">
                    <div class="col-sm-4">

                        <video id="preview"></video>
                    </div>
                    <p class="login-box-msg">Simula Leitor</p>
                    <form method="post">
                        <div class="form-group has-feedback">
                            <input type="text" class="form-control" placeholder="Id Animal" name="ingAnimal" required>
                            <span class="glyphicon glyphicon-qrcode form-control-feedback"></span>
                        </div>
                        <div class="row">
                            <div class="col-xs-4">
                                <button type="submit" class="btn btn-primary btn-block btn-flat">Entrar</button>
                            </div>
                        </div>

                    </form>

                </div>

            </div>

        </div>

    </div>
    <script type="text/javascript">
        let scanner = new Instascan.Scanner({ video: document.getElementById('preview') });
        scanner.addListener('scan', function (content) {
          console.log(content);
        });
            scanner.addListener('scan', function(content) {
                alert('Escaneou o conteudo: ' + content)
                window.open(content, "_blank")

            })
            Instascan.Camera.getCameras().then(cameras => {
                if(cameras.length > 0) {
                    scanner.start(cameras[0])
                } else {
                    console.error(" nao tem camera")
                }
            })

      </script>
</body>

</html>